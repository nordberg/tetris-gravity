% !TEX TS-program = pdflatex
% !TEX encoding = UTF-8 Unicode

% This is a simple template for a LaTeX document using the "article" class.
% See "book", "report", "letter" for other types of document.

\documentclass[11pt]{article} % use larger type; default would be 10pt

\usepackage[utf8]{inputenc} % set input encoding (not needed with XeLaTeX)

%%% Examples of Article customizations
% These packages are optional, depending whether you want the features they provide.
% See the LaTeX Companion or other references for full information.

%%% PAGE DIMENSIONS
\usepackage{geometry} % to change the page dimensions
\geometry{a4paper} % or letterpaper (US) or a5paper or....
% \geometry{margin=2in} % for example, change the margins to 2 inches all round
% \geometry{landscape} % set up the page for landscape
%   read geometry.pdf for detailed page layout information

\usepackage{graphicx} % support the \includegraphics command and options

% \usepackage[parfill]{parskip} % Activate to begin paragraphs with an empty line rather than an indent

\usepackage{amsmath} %math

%%% PACKAGES
\usepackage{booktabs} % for much better looking tables
\usepackage{array} % for better arrays (eg matrices) in maths
\usepackage{paralist} % very flexible & customisable lists (eg. enumerate/itemize, etc.)
\usepackage{verbatim} % adds environment for commenting out blocks of text & for better verbatim
\usepackage{subfig} % make it possible to include more than one captioned figure/table in a single float
% These packages are all incorporated in the memoir class to one degree or another...

%%% HEADERS & FOOTERS
\usepackage{fancyhdr} % This should be set AFTER setting up the page geometry
\pagestyle{fancy} % options: empty , plain , fancy
\renewcommand{\headrulewidth}{0pt} % customise the layout...
\lhead{}\chead{}\rhead{}
\lfoot{}\cfoot{\thepage}\rfoot{}

%%% SECTION TITLE APPEARANCE
%\usepackage{sectsty}
%\allsectionsfont{\sffamily\mdseries\upshape} % (See the fntguide.pdf for font help)
% (This matches ConTeXt defaults)

%%% ToC (table of contents) APPEARANCE
\usepackage[nottoc,notlof,notlot]{tocbibind} % Put the bibliography in the ToC
\usepackage[titles,subfigure]{tocloft} % Alter the style of the Table of Contents
\renewcommand{\cftsecfont}{\rmfamily\mdseries\upshape}
\renewcommand{\cftsecpagefont}{\rmfamily\mdseries\upshape} % No bold!

%%% END Article customizations

%%% The "real" document content comes below...

\title{Tetris with Gravity}
\author{Nordberg, Marcus \\ mnordber@kth.se
		\and
	Rolleberg, Niklas \\ nrol@kth.se}
%\date{} % Activate to display a given date or no date (if empty),
         % otherwise the current date is printed 

\begin{document}
\maketitle

\section{Project idea}
Our idea for a project was to make a version of tetris with real forces and behaviour of the tetris blocks. The goal of the project was to make tetris look more realistic. 

\section{Restrictions}
Due to the short timespan we had to make some restrictions to the game. We decided to use balls instead of squared so collision detections would be simpler, and we wouldn't have to consider rotations from collisions.

\section{Technical aspects}
The forces we had to implement was gravity, and some kind of force that could handle collisions between game objects and walls. First we tried to make the balls bounce on the walls and each other by just handling these collisions as fully elastic collisions. This did however not look very realistic, so we decided to give up the collision-approach and go for mass-spring system instead. In order for this to work we had to implement Hooke's law (1) and a damper to prevent oscillations (2).
%Hooke's law
\begin{equation}
       F = -k*x
\end{equation}

\begin{equation}
       F = -d*v
\end{equation}

We introduced springs for keeping the balls inside the container, and between the balls to handle collisions. These spring forces was just added when a ball was colliding with something. Later we added springs between the balls in order to keep them together as a tetris block. These springs could break if they ware pulled to far, this made the blocks break apart when they ware hit by other objects.   

 

\section{Game aspects}
teris Ã¤r kul

\section{Problems}
In our first attempt where we tried using fully elastic collisions we succeeded to get fairly realistic interaction between the ground and a bouncing ball, but the interaction between balls was realistic at all, mostly because we has to cancel out chain reactions between the balls with a high dampening. This made the balls move slowly colliding, which didn't look realistic at all.
\\  \\
Our implementation of the mass spring system is based on lab 3. We started out by using the euler method for calculating the movement of the balls, this turned out to be a problem because of the low accuracy and small stability region of the method. When the balls was supposed to be stationary they ware bouncing up and down slightly instead. We tried to counteract this by increasing the spring coefficient but this made the system unstable, and the balls started flying in all directions. To solve this we changed numerical integrator to RK4 which is a method with a fourth order accuracy compared to to forward euler which is just first order. RK4:s stability region is also bigger than forward euler which allowed us to have larger forces while maintaining the same time step.

\section{Ideas for further work}
\begin{itemize}
\item{Add friction so the balls behave less like a liquid}
\item{Add balls with different attributed, like mass, other forces}
\item{Change the balls to squares, and consider rotation}
\item{extend to 3D}
\item{Add more interesting game mechanics }
\end{itemize}



\end{document}
